<<<<<<< HEAD
# 全宋词数据分析
这个项目尝试使用一些文本特征分析的方法，对全宋词进行数据分析。
=======
# 全唐诗数据分析

这个项目尝试使用一些文本特征分析的方法，对全唐诗进行数据分析。
>>>>>>> 443227c8fa5efae27ecbb93237541a89ef3bb7e3

## 样例

分析的结果。

```
<<<<<<< HEAD
**统计分析
统计了1310位词人的18593首词

写作数量排名：
辛弃疾 580
苏轼 345
赵长卿 325
刘辰翁 322
声声慢 303
吴文英 300
贺铸 283
晏几道 257
刘克庄 255
吴潜 244

最常用的非单字词：
东风 1274
何处 1162
人间 1072
风流 781
西风 746
归来 742
春风 736
归去 684
梅花 681
相思 659
江南 658
如今 622
回首 607
阑干 598
多少 589
千里 585
明月 547
万里 525
相逢 502
芳草 500
天涯 495
黄昏 486
当年 483
风雨 458
依旧 453
当时 444
斜阳 432
风月 415
多情 410
故人 405
不知 404
无人 402
不见 393
凄凉 381
深处 378
平生 378
匆匆 374
无限 371
春色 368
时节 360
一枝 360
流水 358
扁舟 341
功名 339
今日 335
憔悴 334
一点 331
西湖 330
何事 330
黄花 316
十分 315
一片 313
消息 313
杨柳 309
神仙 305
心事 302
去年 297
长安 296
而今 296
鸳鸯 293
芙蓉 292
人生 290
不是 289
桃李 289
今夜 288
寂寞 288
桃花 287
断肠 287
往事 285
佳人 283
悠悠 282
惟有 282
一声 279
几度 279
如何 276
何时 276
无数 275
燕子 275
肠断 274
蓬莱 274
一曲 274
时候 273
青山 273
无情 269
清明 269
天上 266
笙歌 264
东君 263
海棠 263
少年 258
明年 258
千古 254
昨夜 254
一番 253
如许 252
天气 251
行人 249
今年 249
谁知 248
梨花 247
```
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/wordcloud.png)
```

最常用的名词：
人 4623
酒 1749
梦 1717
处 1482
风 1369
雨 1307
东风 1274
事 1098
人间 1072
君 1036

最常见的地名：
江南 658
香 461
西湖 330
云 312
长安 296
青山 273
千古 254
江山 238
夕阳 221
重阳 207

最常见的形容词：
好 1863
老 1545
新 1497
长 1106
香 1055
远 1036
红 1001
难 910
轻 904
小 902

最常用的连词：
和 1261
且 1118
但 978
而 392
并 346
不是 289
何时 276
若 264
如此 247
只有 235

最常用的数词：
月 3269
一 3046
年 1710
日 1280
多 1075
两 754
岁 694
半 652
多少 589
三 567

最常用的介词：
与 2749
在 2403
为 2367
对 1338
向 1314
把 1307
凭 868
自 837
被 746
同 716

最常用的动词：
是 3837
有 3389
去 2744
来 2563
看 2150
笑 1952
如 1864
醉 1749
愁 1697
花 1641

**基于词向量的分析
与 人 相关的词：
长安 0.761020302772522
何处 0.7487633228302002
无人 0.7448281049728394
犹 0.722586989402771
东 0.7139587998390198
不 0.7130317687988281
只 0.7068910598754883
故人 0.7032234072685242
行人 0.6910910606384277
天涯 0.6876154541969299

与 酒 相关的词：
杯 0.8102469444274902
罍 0.7805166244506836
劝 0.7780725359916687
倒 0.7755844593048096
斟 0.769235372543335
卮 0.7596006393432617
俎 0.751197099685669
饮 0.7445586323738098
觞 0.7322167158126831
醉 0.7224146127700806

与 梦 相关的词：
山 0.6869601607322693
镜 0.6316004991531372
声 0.6286977529525757
魂 0.6105484962463379
流水 0.5983734130859375
春梦 0.5883123874664307
愁 0.5792449712753296
江南 0.5761058330535889
断肠 0.5750135779380798
天涯 0.5715292692184448

与 处 相关的词：
最 0.794902503490448
疑 0.7823352813720703
凄凉 0.7800961136817932
犹 0.7778434753417969
旧游 0.7693407535552979
旧时 0.7453198432922363
依然 0.7404006123542786
空 0.7393944263458252
长安 0.7391731142997742
一点 0.7356248497962952

与 风 相关的词：
阶 0.8476390242576599
枝 0.821632981300354
雪 0.8143095970153809
溪 0.8037979602813721
灯 0.7975903749465942
疏 0.7853537201881409
亭 0.7809815406799316
昼 0.7534060478210449
凉 0.7330551147460938
燕 0.7297049760818481

与 雨 相关的词：
海棠 0.9278329014778137
晴 0.9089865684509277
莺 0.903694748878479
梨花 0.8803707361221313
一番 0.8770513534545898
吹 0.8689346313476562
杨柳 0.8631417751312256
燕 0.8608803749084473
阴 0.859714925289154
天气 0.8586112260818481

与 东风 相关的词：
西风 0.9017060399055481
燕子 0.901391863822937
怕 0.8823151588439941
落花 0.8616000413894653
莺 0.8554439544677734
海棠 0.853987455368042
杨花 0.8484547138214111
风雨 0.843187153339386
一夜 0.8346168994903564
暮 0.8319845199584961

与 事 相关的词：
少 0.9162784814834595
算 0.9102570414543152
如此 0.9084253907203674
人生 0.9078418016433716
功名 0.906997799873352
多 0.9006681442260742
甚 0.9003027677536011
这 0.8972034454345703
富贵 0.8842936158180237
今 0.8827233910560608

与 人间 相关的词：
当年 0.9609148502349854
功名 0.9443563222885132
风流 0.9401792287826538
人生 0.9334394931793213
元 0.9304914474487305
吾 0.9286820888519287
世 0.9270988702774048
真 0.9269218444824219
平生 0.9257768392562866
俱 0.9254183173179626

与 君 相关的词：
我 0.9217089414596558
莫 0.8687291145324707
且 0.8558566570281982
伊 0.8462011814117432
殷勤 0.8394012451171875
何如 0.8303946256637573
聊 0.8292283415794373
若 0.8258308172225952
须 0.8257279396057129
渠 0.817533016204834
```
与 辛弃疾 用词相近的诗人：  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/xinqiji.png)

根据tf-idf标准： 刘辰翁  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/liuchenweng.png)

根据word2vector标准： 方岳  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/fangyue.png)

与 苏轼 用词相近的诗人：  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/sushi.png)

根据tf-idf标准： 辛弃疾  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/xinqiji.png)

根据word2vector标准： 刘过  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/liuguo.png)

与 刘辰翁 用词相近的诗人：  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/liuchenweng.png)

根据tf-idf标准： 辛弃疾  
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/xinqiji.png)

根据word2vector标准： 辛弃疾

对写诗数量前一百位的诗人的tf-idf词向量降维结果如下： 
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/tf-idf.png)

对写诗数量前一百位的诗人的word2vector词向量降维结果如下： 
![](https://raw.githubusercontent.com/wfyhehe/poetry-mining/master/images/w2v.png)

=======
**基于统计的分析

写作数量排名：
白居易 2642
杜甫 1151
李白 897
 842 (佚名)
齐己 783
刘禹锡 727
元稹 593
李商隐 555
贯休 553
韦应物 551

最常用的词：
何处 1637
不知 1378
万里 1293
今日 1148
春风 1105
白云 1065
千里 1042
不可 987
不见 884
人间 864

最常用的名词：
人 7090
君 3189
风 2381
事 2071
水 2033
酒 1941
心 1855
山 1682
云 1681
客 1606

最常见的地名：
长安 658
青山 646
云 624
夕阳 465
香 459
江南 412
青云 396
洛阳 360
山川 348
南山 334

最常见的形容词：
远 2653
长 2592
新 2458
深 2189
高 2159
好 2048
老 1482
旧 1460
清 1411
难 1370

**基于词向量的分析

与 春 相关的词：
三月 0.8542773723602295
东风 0.852995753288269
芳草 0.8398303985595703
催 0.8364790678024292
花 0.8362865447998047
春风 0.83452969789505
春色 0.8293470740318298
杨柳 0.8261793851852417
风光 0.8201332092285156
鬓 0.8186365365982056

与 鸳鸯 相关的词：
芙蓉 0.9702868461608887
欹 0.969279408454895
翡翠 0.9670791625976562
槛 0.9654079675674438
檐 0.9595150947570801
锦 0.958173394203186
妆 0.9573670029640198
帘 0.957240641117096
枕 0.9514492750167847
烛 0.9498785734176636

与 垂柳 相关的词：
花影 0.9959638118743896
万株 0.9955847263336182
绮窗 0.9943434000015259
宫花 0.9942189455032349
小庭 0.9941931366920471
柳丝 0.993552565574646
画楼 0.993486762046814
榆叶 0.9933245182037354
日暖 0.9932219982147217
飘香 0.9931892156600952

与 枕 相关的词：
欹 0.9931267499923706
帘 0.9774231910705566
翡翠 0.9678566455841064
簟 0.9676691293716431
檐 0.9662747383117676
壁 0.9642165899276733
砌 0.9638965129852295
池 0.9621031284332275
窗 0.9597471952438354
冷 0.9595738649368286

与 李白 用词相近的诗人：
根据tf-idf标准： 杜甫
根据word2vector标准： 赵冬曦

与 杜甫 用词相近的诗人：
根据tf-idf标准： 白居易
根据word2vector标准： 韦应物

与 白居易 用词相近的诗人：
根据tf-idf标准： 元稹
根据word2vector标准： 王绩
```

对写诗数量前一百位的诗人的tf-idf词向量降维结果如下：
![](https://github.com/router8008/poetry-mining/blob/master/images/tf_idf1.png)
局部结果放大：
![](https://github.com/router8008/poetry-mining/blob/master/images/tf_idf2.png)

对写诗数量前一百位的诗人的word2vector词向量降维结果如下：
![](https://github.com/router8008/poetry-mining/blob/master/images/w2v1.png)
局部结果放大：
![](https://github.com/router8008/poetry-mining/blob/master/images/w2v2.png)
>>>>>>> 443227c8fa5efae27ecbb93237541a89ef3bb7e3

## 运行样例

#### 依赖环境

程序使用了Anaconda的集成python环境进行开发，用到了内部例如`numpy`, `sklearn`, `matplotlib`等机器学习和数学处理库。

另外，还需要如下环境：

```shell
<<<<<<< HEAD
pip install -r requirements.txt
=======
pip3 install jieba 		#用于中文分词
pip3 install gensim		#用于计算word2vec
>>>>>>> 443227c8fa5efae27ecbb93237541a89ef3bb7e3
```

#### 运行方法

当配置好环境后，这样运行样例：

```shell
python3 example.py
```

## 实现介绍

#### 词向量

首先，数据分析的一个重要部分是计算每个诗人所写的诗的集合词向量，可以看作是诗人的“文风”。关于词向量的计算，使用了两种方法：

- **tf-idf**

<<<<<<< HEAD
  通过文本中词语的的tf-idf值计算词人的用词特征，之后计算他们的余弦相似度
  
  这种方法的的弊端在于没有考虑到词语之间的关联性，比如说"酒"，"杯"之间的关联程度，和"酒"，"劝"之间的关联度肯定是不同的，所以引入了下一种计算词向量的方法。
=======
  通过文本中词语的的tf-idf值计算诗人的用词特征，之后计算他们的余弦相似度，推荐一篇可以参考相关知识的blog：[sklearn文本特征提取](http://blog.csdn.net/xiaoxiangzi222/article/details/53490227)。

  这种方法的的弊端在于没有考虑到词语之间的关联性，比如说"青"，"白"之间的关联程度，和"青"，"衣"之间的关联度肯定是不同的，所以引入了下一种计算词向量的方法。
>>>>>>> 443227c8fa5efae27ecbb93237541a89ef3bb7e3


- **word2vec**

<<<<<<< HEAD
  Word2Vec的基本思想是把自然语言中的每一个词，表示成一个统一意义统一维度的短向量。通过word2vec训练后，得到每个词语的词向量，再通过求和平均的方法获得文本的词向量，则可以得到每个诗人的词向量。
  
  求平均的方法来计算文档词向量可能不是的最优方法，可以查阅文献资料寻找更好的办法。
=======
  Word2Vec的基本思想是把自然语言中的每一个词，表示成一个统一意义统一维度的短向量。通过word2vec训练后，得到每个词语的词向量，再通过求和平均的方法获得文本的词向量，则可以得到每个诗人的词向量。当然，求平均肯定不是一个计算文档词向量的最优方法，此处有待改进。

  关于这个方法可以参考：[word2vec&doc2vec词向量模型](http://www.cnblogs.com/maybe2030/p/5427148.html)
>>>>>>> 443227c8fa5efae27ecbb93237541a89ef3bb7e3


#### 数据降维

为了便于显示，将计算结果降维，用到了t-SNE算法。

<<<<<<< HEAD
---


=======
关于t-SNE算法可以参考：[t-SNE聚类算法实践指南](https://yq.aliyun.com/articles/70733)，其中的代码实现可以参考sklearn的官方文档：[Manifold learning on handwritten digits: Locally Linear Embedding, Isomap…](http://scikit-learn.org/stable/auto_examples/manifold/plot_lle_digits.html#sphx-glr-auto-examples-manifold-plot-lle-digits-py)


---


### 欢迎对该样例进行补充和修改！

>>>>>>> 443227c8fa5efae27ecbb93237541a89ef3bb7e3
